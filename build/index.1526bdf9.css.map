{"mappings":"AAAA,UASA,kBAAA,CAFA,YAAA,CACA,qBAAA,CAGA,yCAAA,CARA,WAAA,CAOA,sBAAA,CANA,QAAA,CACA,SAAA,CAHA,UAUA,CCEA,kCAIE,qBAAsB,CAFtB,wBAA0B,CAD1B,oCAAqC,CAErC,sCAEF,CCEA,4CDAE,6CAA2B,CAC3B,cCEF,CCwCA,sCAME,0BAA2B,CAH3B,qBAAsB,CAFtB,yCAA2C,CAC3C,eAAgB,CAEhB,iBAAkB,CAGlB,wBAAyB,CACzB,uBAAwB,CACxB,qBAAsB,CACtB,oBAAqB,CACrB,gBAEF,CDhCA,wBCkCE,YAAO,CACP,kBAAa,CACb,4BAAmB,CACnB,cDhCF,CCkCA,+BDhCE,gBCkCF,CDhCA,+BCkCA,cDhCA,CCkCA,6BACE,oBACF,CDhCA,8BCmCE,YAAa,CACf,kBAAA,CDhCE,sBAAuB,CC8BvB,UAIF,CDhCA,0BCkCE,YAAa,CACb,qBAAmB,CACnB,cACF,CDhCA,kCCkCE,iCAAS,CACT,4CDhCF,CACA,sBCqCE,4BAA6B,CAE/B,qBAAA,CDhCE,iBAAkB,CC2BpB,yCAAA,CDhCE,gBAAiB,CCoCjB,WAAa,CAIb,2CDhCF,CACA,4BCmCE,kCAAa,CADb,cD/BF,CACA,0BCmCE,iCAAsC,CDlCtC,4CCmCF,CDhCA,uBCkCE,iCAAW,CACX,4CDhCF,CCkCA,6BAGE,kBAAmB,CADnB,iBAAS,CDlCT,UAGF,CE1BA,sCAME,0BAA2B,CAH3B,qBAAsB,CAFtB,yCAA2C,CAC3C,eAAgB,CAEhB,iBAAkB,CAGlB,wBAAyB,CACzB,uBAAwB,CACxB,qBAAsB,CACtB,oBAAqB,CACrB,gBAEF,CF8BA,wBE5BE,YAAO,CACP,kBAAa,CACb,4BAAmB,CACnB,cF8BF,CE5BA,+BF8BE,gBE5BF,CF8BA,+BE5BA,cF8BA,CE5BA,6BACE,oBACF,CF8BA,8BE3BE,YAAa,CACf,kBAAA,CF8BE,sBAAuB,CEhCvB,UAIF,CF8BA,0BE5BE,YAAa,CACb,qBAAmB,CACnB,cACF,CF8BA,kCE5BE,iCAAS,CACT,4CF8BF,CACA,sBEzBE,4BAA6B,CAE/B,qBAAA,CF8BE,iBAAkB,CEnCpB,yCAAA,CF8BE,gBAAiB,CE1BjB,WAAa,CAIb,2CF8BF,CACA,4BE3BE,kCAAa,CADb,cF+BF,CACA,0BE3BE,iCAAsC,CF4BtC,4CE3BF,CF8BA,uBE5BE,iCAAW,CACX,4CF8BF,CE5BA,6BAGE,kBAAmB,CADnB,iBAAS,CF4BT,UAGF,CE5BA,uBF8BE,qBAAuB,CE3BvB,WAAY,CADZ,SF+BF,CGjJA,mCACE,UACF,CHqJA,gCG/IE,cAAY,CAJZ,YAAa,CAEb,yCAAuC,CADvC,sCAAa,CAEb,WHsJF,CGnJA,4BHqJE,qBAAuB,CGnJvB,iBAAW,CACX,iBAAkB,CAClB,4CHqJF,CACA,kCGnJA,mBAAA,CHqJE,gBAAkB,CGnJlB,gBHqJF,CACA,+BGnJE,YACF,CHqJA,kCGlJE,iCAAa,CADb,cAEF,CHqJA,0BGnJE,iCHqJF,CACA,uCGnJA,gCAEI,iCAAO,CHmJP,uBAEJ,CGnJA,CCzDA,oBAKE,kBAAmB,CAFnB,YAAa,CACb,qBAAsB,CAGtB,yCAA2C,CAL3C,YAAa,CAIb,sBAAuB,CALvB,WAOF,CJiNA,0BACE,eI/MF,CJiNA,yBAEE,UAAW,CI/MX,aAAQ,CAFV,SJmNA,CACA,4BAGE,kBAAmB,CIlNnB,YAAa,CACf,qBAAA,CAEE,sBJiNF,CACA,uCACA,oBI/MI,UACJ,CJiNA","sources":["src/index.css","src/components/StringSymbol.vue","%3Cinput%20css%20397DLy%3E","src/components/Level.vue","src/components/BirdLevel.vue","src/components/LevelSelect.vue","src/App.vue"],"sourcesContent":["body,\nhtml {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-family: \"Computer Modern Serif\", serif;\n}\n","<template>\n  <span\n    :class=\"{\n      nonterminalSymbol: object.kind == 'Nonterminal',\n      activated:\n        (productions[activeProductionIndex] || [])[0] == object.character,\n    }\"\n    @click=\"activate\"\n  >\n    {{ object.character }}\n  </span>\n</template>\n\n<style scoped>\n.nonterminalSymbol {\n  transition-property: background-color;\n  transition-duration: 0.15s;\n  transition-timing-function: ease-in-out;\n  box-sizing: border-box;\n}\n\n.nonterminalSymbol.activated {\n  background-color: rgb(0, 255, 50, 0.25) !important;\n  cursor: pointer;\n}\n\n.nonterminalSymbol:hover {\n  /* background-color: rgb(0, 0, 50, 0.1); */\n  /* cursor: pointer; */\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { SentinelForm } from \"./types\";\n\nexport default defineComponent({\n  // type inference enabled\n\n  props: {\n    index: Number,\n    activeProductionIndex: Number,\n    productions: Array,\n  },\n\n  data() {\n    let parentData = this.$parent?.$data as SentinelForm;\n    console.log(parentData);\n\n    return {\n      object: parentData.list[this.index || 0],\n      isActive: parentData.activeProductionIndex == this.index,\n    };\n  },\n\n  emits: [\"applyProduction\"],\n\n  methods: {\n    activate() {\n      console.log(\"Ran click event\");\n      this.$emit(\"applyProduction\", this.index);\n    },\n  },\n});\n</script>","body,\nhtml {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-family: \"Computer Modern Serif\", serif;\n}\n\n\n.nonterminalSymbol[data-v-4d1dce] {\n  transition-property: background-color;\n  transition-duration: 0.15s;\n  transition-timing-function: ease-in-out;\n  box-sizing: border-box;\n}\n.nonterminalSymbol.activated[data-v-4d1dce] {\n  background-color: rgb(0, 255, 50, 0.25) !important;\n  cursor: pointer;\n}\n.nonterminalSymbol[data-v-4d1dce]:hover {\n  /* background-color: rgb(0, 0, 50, 0.1); */\n  /* cursor: pointer; */\n}\n\n\n#buildingStringWrapper[data-v-ace1a5] {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 2.5em;\n  box-sizing: border-box;\n  text-align: center;\n\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Old versions of Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n#linkRow[data-v-ace1a5] {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  margin-top: 2em;\n}\n#linkRow button[data-v-ace1a5]{\n  font-size: 1.2rem;\n}\n#linkRowDivider[data-v-ace1a5]{\n  margin-top: 2em;\n}\n.buttonShield[data-v-ace1a5] {\n  display: inline-block;\n}\n#buttonWrapper[data-v-ace1a5] {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n.buttonRow[data-v-ace1a5] {\n  display: flex;\n  flex-direction: column;\n  font-size: 1rem;\n}\n.dangerHover[data-v-ace1a5]:hover{\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.15s ease-in-out;\n}\nbutton[data-v-ace1a5] {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 1.5rem;\n\n  background-color: transparent;\n  margin: 0.2em;\n  border: 1px solid black;\n  border-radius: 3px;\n\n  transition: background-color 0.2s ease-in-out;\n}\nbutton[data-v-ace1a5]:hover {\n  cursor: pointer;\n  background-color: rgba(100, 100, 100, 0.1);\n}\n.completed[data-v-ace1a5] {\n  transition: background-color 0.75s ease-in-out;\n  background-color: rgba(0, 255, 0, 0.2);\n}\n.failed[data-v-ace1a5] {\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.75s ease-in-out;\n}\n#levelWrapper[data-v-ace1a5] {\n  width: 100%;\n  text-align: center;\n  padding-bottom: 2em;\n}\n\n\n#buildingStringWrapper[data-v-b4fa11] {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 2.5em;\n  box-sizing: border-box;\n  text-align: center;\n\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Old versions of Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n#linkRow[data-v-b4fa11] {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  margin-top: 2em;\n}\n#linkRow button[data-v-b4fa11] {\n  font-size: 1.2rem;\n}\n#linkRowDivider[data-v-b4fa11] {\n  margin-top: 2em;\n}\n.buttonShield[data-v-b4fa11] {\n  display: inline-block;\n}\n#buttonWrapper[data-v-b4fa11] {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n.buttonRow[data-v-b4fa11] {\n  display: flex;\n  flex-direction: column;\n  font-size: 1rem;\n}\n.dangerHover[data-v-b4fa11]:hover {\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.15s ease-in-out;\n}\nbutton[data-v-b4fa11] {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 1.5rem;\n\n  background-color: transparent;\n  margin: 0.2em;\n  border: 1px solid black;\n  border-radius: 3px;\n\n  transition: background-color 0.2s ease-in-out;\n}\nbutton[data-v-b4fa11]:hover {\n  cursor: pointer;\n  background-color: rgba(100, 100, 100, 0.1);\n}\n.completed[data-v-b4fa11] {\n  transition: background-color 0.75s ease-in-out;\n  background-color: rgba(0, 255, 0, 0.2);\n}\n.failed[data-v-b4fa11] {\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.75s ease-in-out;\n}\n#levelWrapper[data-v-b4fa11] {\n  width: 100%;\n  text-align: center;\n  padding-bottom: 2em;\n}\n#canvas[data-v-b4fa11] {\n  border: 2px solid black;\n  width: 70%;\n  height: auto;\n}\n\n\n#levelSelectWrapper[data-v-7fed13] {\n  width: 100%;\n}\n#levelSelectGrid[data-v-7fed13] {\n  display: grid;\n  grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\n  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n  row-gap: 1em;\n  column-gap: 1em;\n}\n.levelButton[data-v-7fed13] {\n  border: 2px solid black;\n  border-radius: 5px;\n  text-align: center;\n  transition: background-color 0.15s ease-in-out;\n}\n.levelButton .name[data-v-7fed13] {\n  margin-bottom: 0.25em;\n  margin-top: 0.25em;\n  padding-bottom: 0;\n}\n.levelButton hr[data-v-7fed13] {\n  margin-top: 0;\n}\n.levelButton[data-v-7fed13]:hover {\n  cursor: pointer;\n  background-color: rgba(0, 255, 0, 0.2);\n}\n.completed[data-v-7fed13] {\n  background-color: rgba(0, 255, 0, 0.2);\n}\n@media only screen and (max-width: 7in) {\n#levelSelectGrid[data-v-7fed13] {\n    grid-template-rows: auto;\n    grid-template-columns: 1fr 1fr 1fr;\n}\n}\n\n\nmain[data-v-1b4399] {\n  width: 7.5in;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-family: \"Computer Modern Serif\", serif;\n}\n#header > h1[data-v-1b4399]{\n  margin-bottom: 0;\n}\n#gameArea[data-v-1b4399] {\n  width: 80%;\n  height: 95%;\n  margin-top: 5%;\n}\n#gameWrapper[data-v-1b4399] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n@media only screen and (max-width: 7in) {\nmain[data-v-1b4399]{\n    width: 90vw;\n}\n}\n\n/*# sourceMappingURL=index.1526bdf9.css.map */\n","<template>\n  <div id=\"levelWrapper\" :class=\"{ completed: completed, failed: failed }\">\n    <div id=\"buildingStringWrapper\">\n      <p id=\"buildingString\">\n        <string-symbol\n          v-for=\"(symbol, index) in list\"\n          :index=\"index\"\n          :key=\"symbol.character + index\"\n          v-model:activeProductionIndex=\"activeProductionIndex\"\n          v-model:productions=\"productions\"\n          @applyProduction=\"applyProduction\"\n        ></string-symbol>\n      </p>\n    </div>\n    <button\n      id=\"returnToLevelSelect\"\n      v-if=\"completed\"\n      @click=\"returnToLevelSelect\"\n    >\n      Return to Level Select\n    </button>\n    <button id=\"restart\" v-if=\"failed\" @click=\"restart\">Restart</button>\n    <div id=\"targetStringWrapper\">\n      <p>\n        Construct: <span id=\"targetString\">{{ targetstring }}</span>\n      </p>\n    </div>\n    <!-- <div id=\"buttonWrapper\" :style=\"{'grid-template-columns': 'repeat(1fr, ' + new Set(productions.map(e => e[0])).size + ')'}\"> -->\n    <div\n      id=\"buttonWrapper\"\n      :style=\"{ 'grid-template-columns': 'repeat(1fr, 3)' }\"\n    >\n      <div\n        class=\"buttonRow\"\n        v-for=\"char in new Set(productions.map((e) => e[0]))\"\n        :key=\"char\"\n      >\n        <span v-for=\"(rule, index) in productions\" :key=\"rule[0] + index\">\n          <button\n            v-if=\"rule[0] === char\"\n            class=\"productionButton\"\n            @click=\"activateProduction(index)\"\n          >\n            {{\n              rule[0] +\n              \" ⟶ \" +\n              (rule[1].length === 0\n                ? \"λ\"\n                : rule[1].reduce((str, el) => str + el.character, \"\"))\n            }}\n          </button>\n        </span>\n      </div>\n    </div>\n      <p v-if=\"levelIndex === 0\"> Click a button to activate a production rule, then click an appropriate symbol to apply it to</p>\n    <hr id=\"linkRowDivider\" />\n    <div id=\"linkRow\">\n      <button @click=\"returnToLevelSelect\" class=\"dangerHover\">Return To Level Select</button>\n      <button @click=\"promptRestart\" class=\"dangerHover\">Restart</button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n#buildingStringWrapper {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 2.5em;\n  box-sizing: border-box;\n  text-align: center;\n\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Old versions of Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n\n#linkRow {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  margin-top: 2em;\n}\n\n#linkRow button{\n  font-size: 1.2rem;\n}\n\n#linkRowDivider{\n  margin-top: 2em;\n}\n\n.buttonShield {\n  display: inline-block;\n}\n\n#buttonWrapper {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.buttonRow {\n  display: flex;\n  flex-direction: column;\n  font-size: 1rem;\n}\n\n.dangerHover:hover{\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.15s ease-in-out;\n}\n\nbutton {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 1.5rem;\n\n  background-color: transparent;\n  margin: 0.2em;\n  border: 1px solid black;\n  border-radius: 3px;\n\n  transition: background-color 0.2s ease-in-out;\n}\n\nbutton:hover {\n  cursor: pointer;\n  background-color: rgba(100, 100, 100, 0.1);\n}\n\n.completed {\n  transition: background-color 0.75s ease-in-out;\n  background-color: rgba(0, 255, 0, 0.2);\n}\n\n.failed {\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.75s ease-in-out;\n}\n\n#levelWrapper {\n  width: 100%;\n  text-align: center;\n  padding-bottom: 2em;\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport StringSymbol from \"./StringSymbol.vue\";\nimport {\n  formatProductionStrings,\n  NonterminalSymbolObject,\n  SentinelForm,\n  stringToSymbols,\n  TerminalSymbolObject,\n} from \"./types\";\n\nexport default defineComponent({\n  // type inference enabled\n\n  props: [\"startstring\", \"productionstrings\", \"targetstring\", \"levelIndex\"],\n  emits: [\"completed\", \"restart\"],\n\n  data() {\n    console.log(this.startstring, this.productionstrings, this.targetstring);\n    console.log(\"Mounted\");\n\n    return {\n      list: stringToSymbols(this.startstring),\n      activeProductionIndex: null,\n      productions: formatProductionStrings(this.productionstrings),\n      completed: false,\n      failed: false,\n    } as SentinelForm;\n  },\n  methods: {\n    applyProduction(index: number) {\n      if (this.activeProductionIndex != null) {\n        let production = this.productions[this.activeProductionIndex];\n        let symbol = this.list[index];\n        if (symbol.character == production[0]) {\n          //remove the symbol\n          this.list.splice(index, 1);\n          let symbolsToInsert = this.productions[this.activeProductionIndex][1];\n          for (let i = 0; i < symbolsToInsert.length; i++) {\n            this.list.splice(index + i, 0, symbolsToInsert[i]);\n          }\n\n          console.log(\"After, list is: \", this.list);\n\n          let newString = this.list.reduce(\n            (str, charObj) => str + charObj.character,\n            \"\"\n          );\n          if (newString == this.targetstring) {\n            console.log(\"Constructed string successfully\");\n            this.completed = true;\n\n            let parsedJson = JSON.parse(\n              localStorage.getItem(\"completedLevels\") || \"{}\"\n            );\n            parsedJson[this.levelIndex] = true;\n            localStorage.setItem(\"completedLevels\", JSON.stringify(parsedJson));\n\n          } else {\n            let numberOfNonTerminals = this.list.reduce(\n              (acc, el) => acc + (el.kind === \"Nonterminal\" ? 1 : 0),\n              0\n            );\n            if (numberOfNonTerminals === 0) {\n              this.failed = true;\n            }\n          }\n          this.activeProductionIndex = null;\n        }\n      }\n    },\n\n    activateProduction(index: number) {\n      console.log(\"Activating production \", index);\n\n      this.activeProductionIndex = index;\n    },\n\n    returnToLevelSelect() {\n      this.$emit(\"completed\");\n    },\n\n    restart() {\n      this.$emit(\"restart\");\n    },\n\n    promptRestart(){\n      let confirmation = confirm(\"Confirm restart?\");\n\n      if(confirmation){\n        this.$emit(\"restart\");\n      }\n    }\n  },\n  components: {\n    StringSymbol,\n  },\n});\n</script>","<template>\n  <div id=\"levelWrapper\" :class=\"{ completed: completed, failed: failed }\">\n    <canvas\n      v-show=\"activatedCanvas\"\n      width=\"1000\"\n      height=\"1000\"\n      id=\"canvas\"\n    ></canvas>\n\n    <div id=\"buildingStringWrapper\">\n      <p id=\"buildingString\">\n        <string-symbol\n          v-for=\"(symbol, index) in list\"\n          :index=\"index\"\n          :key=\"symbol.character + index\"\n          v-model:activeProductionIndex=\"activeProductionIndex\"\n          v-model:productions=\"productions\"\n          @applyProduction=\"applyProduction\"\n        ></string-symbol>\n      </p>\n    </div>\n    <button\n      id=\"returnToLevelSelect\"\n      v-if=\"completed\"\n      @click=\"returnToLevelSelect\"\n    >\n      Return to Level Select\n    </button>\n    <button id=\"restart\" v-if=\"failed\" @click=\"restart\">Restart</button>\n    <div id=\"targetStringWrapper\">\n      <p>\n        Construct: <span id=\"targetString\">{{ targetString }}</span>\n      </p>\n    </div>\n    <!-- <div id=\"buttonWrapper\" :style=\"{'grid-template-columns': 'repeat(1fr, ' + new Set(productions.map(e => e[0])).size + ')'}\"> -->\n    <div\n      id=\"buttonWrapper\"\n      :style=\"{ 'grid-template-columns': 'repeat(1fr, 3)' }\"\n    >\n      <div\n        class=\"buttonRow\"\n        v-for=\"char in new Set(productions.map((e) => e[0]))\"\n        :key=\"char\"\n      >\n        <span v-for=\"(rule, index) in productions\" :key=\"rule[0] + index\">\n          <button\n            v-if=\"rule[0] === char\"\n            class=\"productionButton\"\n            @click=\"activateProduction(index)\"\n          >\n            {{\n              rule[0] +\n              \" ⟶ \" +\n              (rule[1].length === 0\n                ? \"λ\"\n                : rule[1].reduce((str, el) => str + el.character, \"\"))\n            }}\n          </button>\n        </span>\n      </div>\n    </div>\n    <p v-if=\"levelIndex === 0\">\n      Click a button to activate a production rule, then click an appropriate\n      symbol to apply it to\n    </p>\n    <hr id=\"linkRowDivider\" />\n    <div id=\"linkRow\">\n      <button @click=\"returnToLevelSelect\" class=\"dangerHover\">\n        Return To Level Select\n      </button>\n      <button @click=\"promptRestart\" class=\"dangerHover\">Restart</button>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n#buildingStringWrapper {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 2.5em;\n  box-sizing: border-box;\n  text-align: center;\n\n  -webkit-touch-callout: none; /* iOS Safari */\n  -webkit-user-select: none; /* Safari */\n  -khtml-user-select: none; /* Konqueror HTML */\n  -moz-user-select: none; /* Old versions of Firefox */\n  -ms-user-select: none; /* Internet Explorer/Edge */\n  user-select: none; /* Non-prefixed version, currently\n                                  supported by Chrome, Edge, Opera and Firefox */\n}\n\n#linkRow {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  margin-top: 2em;\n}\n\n#linkRow button {\n  font-size: 1.2rem;\n}\n\n#linkRowDivider {\n  margin-top: 2em;\n}\n\n.buttonShield {\n  display: inline-block;\n}\n\n#buttonWrapper {\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.buttonRow {\n  display: flex;\n  flex-direction: column;\n  font-size: 1rem;\n}\n\n.dangerHover:hover {\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.15s ease-in-out;\n}\n\nbutton {\n  font-family: \"Computer Modern Serif\", serif;\n  font-size: 1.5rem;\n\n  background-color: transparent;\n  margin: 0.2em;\n  border: 1px solid black;\n  border-radius: 3px;\n\n  transition: background-color 0.2s ease-in-out;\n}\n\nbutton:hover {\n  cursor: pointer;\n  background-color: rgba(100, 100, 100, 0.1);\n}\n\n.completed {\n  transition: background-color 0.75s ease-in-out;\n  background-color: rgba(0, 255, 0, 0.2);\n}\n\n.failed {\n  background-color: rgba(255, 0, 0, 0.2);\n  transition: background-color 0.75s ease-in-out;\n}\n\n#levelWrapper {\n  width: 100%;\n  text-align: center;\n  padding-bottom: 2em;\n}\n\n#canvas {\n  border: 2px solid black;\n  width: 70%;\n  height: auto;\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport StringSymbol from \"./StringSymbol.vue\";\nimport {\n  formatProductionStrings,\n  NonterminalSymbolObject,\n  SentinelForm,\n  stringToSymbols,\n  TerminalSymbolObject,\n} from \"./types\";\n\nexport default defineComponent({\n  // type inference enabled\n\n  emits: [\"completed\", \"restart\"],\n\n  data() {\n    console.log(this.startstring, this.productionstrings, this.targetstring);\n    console.log(\"Mounted\");\n\n    return {\n      list: stringToSymbols(\"S\"),\n      activeProductionIndex: -1,\n      productions: formatProductionStrings([\n        [\"S\", \"X\"],\n        [\"X\", \"xX\"],\n      ]),\n      targetString: \"A Bird\",\n      activatedCanvas: false,\n      completed: false,\n      numberOfLines: 0,\n      failed: false,\n      levelIndex: 13,\n    };\n  },\n  methods: {\n    applyProduction(index: number) {\n      if (this.activeProductionIndex != null) {\n        let production = this.productions[this.activeProductionIndex];\n        let symbol = this.list[index];\n        console.log(\"Applyiong prod\", index);\n        if (symbol.character == production[0]) {\n          //remove the symbol\n          this.list.splice(index, 1);\n          let symbolsToInsert = this.productions[this.activeProductionIndex][1];\n          for (let i = 0; i < symbolsToInsert.length; i++) {\n            this.list.splice(index + i, 0, symbolsToInsert[i]);\n          }\n\n          let strokeLine = () => {\n            let ctx = (\n              document.getElementById(\"canvas\") as HTMLCanvasElement\n            ).getContext(\"2d\");\n            if (ctx === null) return;\n            ctx.beginPath();\n            ctx.moveTo(\n              500 +\n                500 *\n                  ((3 / 2) *\n                    Math.sin(\n                      (2 * Math.PI * this.numberOfLines) / 500 + Math.PI / 3\n                    ) **\n                      7),\n              500 +\n                -500 *\n                  ((1 / 4) *\n                    Math.cos((6 * Math.PI * this.numberOfLines) / 500) ** 2)\n            );\n\n            ctx.lineTo(\n              500 +\n                400 *\n                  ((1 / 5) *\n                    Math.sin(\n                      (6 * Math.PI * this.numberOfLines) / 500 + Math.PI / 5\n                    )),\n              500 +\n                400 *\n                  ((2 / 3) *\n                    Math.sin(\n                      (2 * Math.PI * this.numberOfLines) / 500 - Math.PI / 3\n                    ) **\n                      2)\n            );\n\n            ctx.stroke();\n          };\n\n          if (this.activeProductionIndex === 0) {\n            this.activatedCanvas = true;\n          } else if (this.activeProductionIndex === 1) {\n            console.log(\"running 1\");\n            this.numberOfLines++;\n\n            strokeLine();\n\n            if (this.numberOfLines == 3) {\n              this.productions.push(\n                ...formatProductionStrings([[\"X\", \"500X\"]])\n              );\n            }\n          } else if (this.activeProductionIndex === 2) {\n            let i = 0;\n            let int = setInterval(() => {\n              i++;\n              this.numberOfLines++;\n              strokeLine();\n\n              if (i === 500) {\n                this.completed = true;\n                clearInterval(int);\n                this.activeProductionIndex = -1;\n                let frameCount = 0;\n                function animate() {\n                  let ctx = (\n                    document.getElementById(\"canvas\") as HTMLCanvasElement\n                  ).getContext(\"2d\");\n                  if (ctx === null) return;\n\n                  ctx.clearRect(0, 0, 1000, 1000);\n\n                  for (let i = 1; i <= 500; i++) {\n                    ctx.beginPath();\n                    ctx.moveTo(\n                      500 +\n                        500 *\n                          ((3 / 2) *\n                            Math.sin(\n                              (2 * Math.PI * i) / 500 +\n                                Math.PI / 3\n\n                            ) **\n                              7),\n                      500 +\n                        -500 *\n                          ((1 / 4) *\n                            Math.cos(\n                              (6 * Math.PI * i) / 500\n                                + frameCount/60\n\n                            ) **\n                              2)\n                    );\n\n                    ctx.lineTo(\n                      500 +\n                        400 *\n                          ((1 / 5) *\n                            Math.sin(\n                              (6 * Math.PI * i) / 500 +\n                                Math.PI / 5\n                            )),\n                      500 +\n                        400 *\n                          ((2 / 3) *\n                            Math.sin(\n                              (2 * Math.PI * i) / 500 -\n                                Math.PI / 3\n                                + frameCount/60\n\n                            ) **\n                              2)\n                    );\n\n                    ctx.stroke();\n                  }\n\n                  frameCount++;\n                  requestAnimationFrame(animate);\n                }\n\n              }\n            }, 2);\n            return;\n          }\n\n          let newString = this.list.reduce(\n            (str, charObj) => str + charObj.character,\n            \"\"\n          );\n          if (newString == this.targetString) {\n            console.log(\"Constructed string successfully\");\n            this.completed = true;\n\n            let parsedJson = JSON.parse(\n              localStorage.getItem(\"completedLevels\") || \"{}\"\n            );\n            parsedJson[this.levelIndex] = true;\n            localStorage.setItem(\"completedLevels\", JSON.stringify(parsedJson));\n          } else {\n            let numberOfNonTerminals = this.list.reduce(\n              (acc, el) => acc + (el.kind === \"Nonterminal\" ? 1 : 0),\n              0\n            );\n            if (numberOfNonTerminals === 0) {\n              this.failed = true;\n            }\n          }\n          this.activeProductionIndex = -1;\n        }\n      }\n    },\n\n    activateProduction(index: number) {\n      console.log(\"Activating production \", index);\n\n      this.activeProductionIndex = index;\n    },\n\n    returnToLevelSelect() {\n      this.$emit(\"completed\");\n    },\n\n    restart() {\n      this.$emit(\"restart\");\n    },\n\n    promptRestart() {\n      let confirmation = confirm(\"Confirm restart?\");\n\n      if (confirmation) {\n        this.$emit(\"restart\");\n      }\n    },\n  },\n  components: {\n    StringSymbol,\n  },\n});\n</script>","<template>\n  <div id=\"levelSelectWrapper\">\n    <div v-if=\"currentLevelIndex === null\" id=\"levelSelectGrid\">\n      <div\n        class=\"levelButton\"\n        v-for=\"(level, index) in Levels\"\n        :key=\"index\"\n        @click=\"loadLevel(index)\"\n        :class=\"{ completed: isComplete(index) }\"\n      >\n        <h1>{{ index }}</h1>\n      </div>\n    </div>\n\n\n    <level\n      :key=\"currentLevelIndex\"\n      v-if=\"currentLevelIndex !== null && currentLevelIndex !== 13\"\n      :startstring=\"Levels[currentLevelIndex].startString\"\n      :targetstring=\"Levels[currentLevelIndex].targetString\"\n      :productionstrings=\"Levels[currentLevelIndex].productionStrings\"\n      :levelIndex=\"currentLevelIndex\"\n      @completed=\"completedLevel\"\n      @restart=\"restartLevel\"\n    >\n    </level>\n\n    <bird-level\n      v-if=\"currentLevelIndex === 13\"\n      @completed=\"completedLevel\"\n      @restart=\"restartLevel\"\n    ></bird-level>\n  </div>\n</template>\n\n<style scoped>\n#levelSelectWrapper {\n  width: 100%;\n}\n\n#levelSelectGrid {\n  display: grid;\n  grid-template-rows: 1fr 1fr 1fr 1fr 1fr;\n  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;\n  row-gap: 1em;\n  column-gap: 1em;\n}\n\n.levelButton {\n  border: 2px solid black;\n  border-radius: 5px;\n  text-align: center;\n  transition: background-color 0.15s ease-in-out;\n}\n\n.levelButton .name {\n  margin-bottom: 0.25em;\n  margin-top: 0.25em;\n  padding-bottom: 0;\n}\n\n.levelButton hr {\n  margin-top: 0;\n}\n\n.levelButton:hover {\n  cursor: pointer;\n  background-color: rgba(0, 255, 0, 0.2);\n}\n\n.completed {\n  background-color: rgba(0, 255, 0, 0.2);\n}\n\n@media only screen and (max-width: 7in) {\n  #levelSelectGrid {\n    grid-template-rows: auto;\n    grid-template-columns: 1fr 1fr 1fr;\n  }\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { LevelObject, Levels } from \"./levels\";\nimport Level from \"./Level.vue\";\nimport BirdLevel from \"./BirdLevel.vue\";\n\ntype LevelSelectData = {\n  Levels: LevelObject[];\n  currentLevelIndex: number | null;\n};\n\nexport default defineComponent({\n  // type inference enabled\n\n  data() {\n    return {\n      Levels: Levels,\n      currentLevelIndex: null,\n    } as LevelSelectData;\n  },\n\n  methods: {\n    loadLevel(index: number) {\n      console.log(\"loading\", index);\n      this.currentLevelIndex = index;\n      console.log(\"Selected level: \", this.Levels[this.currentLevelIndex]);\n    },\n    completedLevel() {\n      this.currentLevelIndex = null;\n    },\n    restartLevel() {\n      if (this.currentLevelIndex === null) return;\n      let oldValue = this.currentLevelIndex + 0;\n      this.currentLevelIndex = null;\n      requestAnimationFrame(() => {\n        this.currentLevelIndex = oldValue;\n      });\n    },\n    isComplete(index: number) {\n      return (\n        JSON.parse(localStorage.getItem(\"completedLevels\") || \"{}\")[index] ===\n        true\n      );\n    },\n  },\n\n  components: {\n    Level,\n    BirdLevel,\n  },\n});\n</script>","<template>\n  <main>\n    <div id=\"gameArea\">\n      <div id=\"header\">\n        <h1>The Formal Grammar Game</h1>\n        <hr>\n      </div>\n      <div id=\"gameWrapper\">\n        <level-select></level-select>\n      </div>\n    </div>\n  </main>\n</template>\n\n<style scoped>\nmain {\n  width: 7.5in;\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  font-family: \"Computer Modern Serif\", serif;\n}\n\n\n#header > h1{\n  margin-bottom: 0;\n}\n\n#gameArea {\n  width: 80%;\n  height: 95%;\n  margin-top: 5%;\n}\n\n#gameWrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n@media only screen and (max-width: 7in) {\n  main{\n    width: 90vw;\n  }\n}\n</style>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport Level from \"./components/Level.vue\";\nimport LevelSelect from \"./components/LevelSelect.vue\";\n\nexport default defineComponent({\n  // type inference enabled\n  data() {\n    return {};\n  },\n  components: {\n    Level,\n    LevelSelect\n  },\n});\n</script>"],"names":[],"version":3,"file":"index.1526bdf9.css.map"}